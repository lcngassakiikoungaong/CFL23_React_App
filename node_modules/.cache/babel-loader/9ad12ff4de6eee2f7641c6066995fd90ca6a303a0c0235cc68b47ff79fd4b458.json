{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nohan\\\\CFL23_React_App\\\\src\\\\components\\\\canvas.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Chart from 'chart.js/auto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Canvas(_ref) {\n  _s();\n  let {\n    xValues,\n    yValues,\n    barColors,\n    hoverColors,\n    expenseTotal\n  } = _ref;\n  const [chartDisplayed, setChartDisplayed] = useState(false);\n  useEffect(() => {\n    function displayChart() {\n      let sum = yValues.reduce((a, b) => a + b, 0);\n      if (sum === 0) {\n        document.querySelector('#chartError').style.display = \"block\";\n        document.querySelector('#canvas').style.display = \"none\";\n      } else {\n        document.querySelector('#chartError').style.display = \"none\";\n        document.querySelector('#canvas').style.display = \"block\";\n        let nonZeroIndexes = yValues.reduce((acc, val, idx) => {\n          if (val > 0) {\n            acc.push(idx);\n          }\n          return acc;\n        }, []);\n        let nonZeroLabels = nonZeroIndexes.map(idx => xValues[idx]);\n        let nonZeroData = nonZeroIndexes.map(idx => yValues[idx]);\n        let nonZeroColors = nonZeroIndexes.map(idx => barColors[idx]);\n        let nonZeroHoverColors = nonZeroIndexes.map(idx => hoverColors[idx]);\n        let myChart = new Chart(\"myChart\", {\n          type: \"pie\",\n          data: {\n            labels: nonZeroLabels,\n            datasets: [{\n              backgroundColor: nonZeroColors,\n              hoverBackgroundColor: nonZeroHoverColors,\n              data: nonZeroData,\n              datalabels: {\n                color: 'white'\n              },\n              animation: {\n                duration: 2000\n              }\n            }]\n          },\n          options: {\n            plugins: {\n              display: true,\n              datalabels: {\n                display: true,\n                formatter: function (data) {\n                  let newData = data / expenseTotal * 100;\n                  return newData.toFixed(1) + '%';\n                },\n                function(value, index, values) {\n                  if (value > 0) {\n                    value = value.toString();\n                    value = value.split(/(?=(?:...)*$)/);\n                    value = value.join(\",\");\n                    return value;\n                  } else {\n                    value = \"\";\n                    return value;\n                  }\n                },\n                function(value, index, values) {\n                  if (value > 0) {\n                    value = value.toString();\n                    value = value.split(/(?=(?:...)*$)/);\n                    value = value.join(\",\");\n                    return value;\n                  } else {\n                    value = \"\";\n                    return value;\n                  }\n                }\n              }\n            },\n            animation: {\n              animateRotate: true,\n              animateScale: true\n            }\n          }\n        });\n      }\n    }\n    function handleScroll() {\n      const chartSection = document.querySelector('#chartSection');\n      if (!chartSection) return;\n      let chartSectionRect = chartSection.getBoundingClientRect();\n      let scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n      if (chartSectionRect.top <= window.innerHeight && chartSectionRect.bottom >= 0) {\n        if (!chartDisplayed) {\n          displayChart();\n          setChartDisplayed(true);\n        }\n      } else {\n        setChartDisplayed(false);\n      }\n    }\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [xValues, yValues, barColors, hoverColors, expenseTotal, chartDisplayed]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [xValues, yValues]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 3\n  }, this);\n}\n_s(Canvas, \"IBuoC+Ynd3r408xGw3Kd8dHCTec=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["useState","useEffect","Chart","jsxDEV","_jsxDEV","Canvas","_ref","_s","xValues","yValues","barColors","hoverColors","expenseTotal","chartDisplayed","setChartDisplayed","displayChart","sum","reduce","a","b","document","querySelector","style","display","nonZeroIndexes","acc","val","idx","push","nonZeroLabels","map","nonZeroData","nonZeroColors","nonZeroHoverColors","myChart","type","data","labels","datasets","backgroundColor","hoverBackgroundColor","datalabels","color","animation","duration","options","plugins","formatter","newData","toFixed","function","value","index","values","toString","split","join","animateRotate","animateScale","handleScroll","chartSection","chartSectionRect","getBoundingClientRect","scrollTop","window","pageYOffset","documentElement","top","innerHeight","bottom","addEventListener","removeEventListener","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/nohan/CFL23_React_App/src/components/canvas.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Chart from 'chart.js/auto';\r\n\r\nfunction Canvas({ xValues, yValues, barColors, hoverColors, expenseTotal }) \r\n{\r\n  const [chartDisplayed, setChartDisplayed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function displayChart() {\r\n      let sum = yValues.reduce((a, b) => a + b, 0);\r\n\r\n      if (sum === 0) {\r\n        document.querySelector('#chartError').style.display = \"block\";\r\n        document.querySelector('#canvas').style.display = \"none\";\r\n      } else {\r\n        document.querySelector('#chartError').style.display = \"none\";\r\n        document.querySelector('#canvas').style.display = \"block\";\r\n\r\n        let nonZeroIndexes = yValues.reduce((acc, val, idx) => {\r\n          if (val > 0) {\r\n            acc.push(idx);\r\n          }\r\n          return acc;\r\n        }, []);\r\n\r\n        let nonZeroLabels = nonZeroIndexes.map(idx => xValues[idx]);\r\n        let nonZeroData = nonZeroIndexes.map(idx => yValues[idx]);\r\n        let nonZeroColors = nonZeroIndexes.map(idx => barColors[idx]);\r\n        let nonZeroHoverColors = nonZeroIndexes.map(idx => hoverColors[idx]);\r\n\r\n        let myChart = new Chart(\"myChart\", {\r\n          type: \"pie\",\r\n          data: {\r\n            labels: nonZeroLabels,\r\n            datasets: [{\r\n              backgroundColor: nonZeroColors,\r\n              hoverBackgroundColor: nonZeroHoverColors,\r\n              data: nonZeroData,\r\n              datalabels: {\r\n                color: 'white'\r\n              },\r\n              animation: {\r\n                duration: 2000\r\n              }\r\n            }]\r\n          },\r\n          options: {\r\n            plugins: {\r\n              display: true,\r\n              datalabels: {\r\n                display: true,\r\n                formatter: function (data) {\r\n                  let newData = data / expenseTotal * 100;\r\n                  return newData.toFixed(1) + '%';\r\n                },\r\n                function (value, index, values) {\r\n                  if (value > 0) {\r\n                    value = value.toString();\r\n                    value = value.split(/(?=(?:...)*$)/);\r\n                    value = value.join(\",\");\r\n                    return value;\r\n                  } else {\r\n                    value = \"\";\r\n                    return value;\r\n                  }\r\n                },\r\n                function (value, index, values) {\r\n                  if (value > 0) {\r\n                    value = value.toString();\r\n                    value = value.split(/(?=(?:...)*$)/);\r\n                    value = value.join(\",\");\r\n                    return value;\r\n                  } else {\r\n                    value = \"\";\r\n                    return value;\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            animation: {\r\n              animateRotate: true,\r\n              animateScale: true,\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    function handleScroll() {\r\n      const chartSection = document.querySelector('#chartSection');\r\n      if (!chartSection) return;\r\n      let chartSectionRect = chartSection.getBoundingClientRect();\r\n      let scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n\r\n      if (chartSectionRect.top <= window.innerHeight && chartSectionRect.bottom >= 0) {\r\n        if (!chartDisplayed) {\r\n          displayChart();\r\n          setChartDisplayed(true);\r\n        }\r\n      } else {\r\n        setChartDisplayed(false);\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, [xValues, yValues, barColors, hoverColors, expenseTotal, chartDisplayed]);\r\n\r\nreturn (\r\n  <div>\r\n    {xValues}\r\n    {yValues}\r\n  </div>\r\n);\r\n}\r\n\r\nexport default Canvas;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}